!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("Splain",[],n):"object"==typeof exports?exports.Splain=n():e.Splain=n()}(window,function(){return function(e){var n={};function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:a})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(a,i,function(n){return e[n]}.bind(null,i));return a},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=5)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),i=h(t(1)),r=h(t(2)),o=h(t(7)),s=h(t(8)),l=h(t(9)),u=h(t(10)),c=h(t(4)),f=h(t(13)),d=h(t(3));function h(e){return e&&e.__esModule?e:{default:e}}var p=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.new(n)}return a(e,[{key:"new",value:function(e){this.dictionaries={default:new i.default},this.dictionaries.default.addEntry(e||o.default),this.config=new r.default}},{key:"configure",value:function(e,n){this.config.configure(e,n)}},{key:"addEntry",value:function(e,n){n||(n="default"),this.dictionaries[n]||(this.dictionaries[n]=new i.default),this.dictionaries[n].addEntry(e)}},{key:"process",value:function(n,t){return(t=t||{}).dictionaryName||(t.dictionaryName="default"),e.processTemplate(n,new s.default(this.dictionaries[t.dictionaryName],this.config,t))}},{key:"verifyDictionary",value:function(e){return l.default.verifyEntries(e)}}],[{key:"processTemplate",value:function(e,n){var t=this;return n||(n=new s.default),c.default.getTemplates(e,n.config).forEach(function(a){var i=f.default.stripTemplate(a,n.config),r=d.default.getTokens(i,n.config),o=u.default.run(r,n);c.default.containsTemplate(o,n.config)&&(o=t.processTemplate(o,n)),e=e.replace(""+a,o),n.addTemplateResolution(i,o)}),e}}]),e}();n.default=p},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(t(6)),r=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.entries={}}return a(e,[{key:"addEntry",value:function(e){var n=this;Object.keys(e).forEach(function(t){n.entries[t]=e[t]})}},{key:"getEntry",value:function(e){var n=e.split(".").reduce(function(e,n){return null===e?null:e[n]||null},this.entries);return Array.isArray(n)?n:null}},{key:"getProcessedEntry",value:function(e,n){var t=this.getEntry(e);if(!t)return null;var a=i.default.processContexts(t,n);return i.default.processWeights(a)}}]),e}();n.default=r},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=class{constructor(){this.keepTemplateOnUnmatched=!0,this.templateTokens={opening:"{{",closing:"}}"},this.fixedResolutionToken="::",this.variableResolutionToken="##",this.keepTemplateOnUnmatched=!0,this.panicThreshold=1e5,this.contextMatchers={conservative:0,selective:1,additive:2},this.contextMatcher=this.contextMatchers.selective}configure(e,n){return this.hasOwnProperty(e)&&(this[e]=n),this}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(t(11)),r=/[?`|\s]/,o=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"getTokens",value:function(e,n){for(var t=[],a=n.panicThreshold;e;){a--;var i=this.findNextToken(e,n);if(t.push(i),e=e.slice(i.raw.length),a<=0){console.warn("couldn't finish processing tokens after "+n.panicThreshold+" panicking..");break}}return t}},{key:"findNextToken",value:function(e,n){var t=1;if(e.startsWith(n.templateTokens.opening)){var a=1,o=n.templateTokens.opening.length,s=n.templateTokens.closing.length;for(t=o;t<e.length&&a>0;)e.indexOf(n.templateTokens.opening,t)===t?(a++,t+=o):e.indexOf(n.templateTokens.closing,t)===t?(a--,t+=s):t++;if(a>0)throw"template {"+e+"} has no closing token";return new i.default("template",e.substring(o,t-s),e.substring(0,t))}if("?"===e[0]){for(;!isNaN(e[t])&&" "!==e[t]&&t<e.length;)t++;return new i.default("?",e.substring(1,t)||"2",e.substring(0,t))}if("|"===e[0])return new i.default("|",null,"|");if(" "===e[0]||"\n"===e[0])return new i.default("blank",null,e[0]);if("`"===e[0]){for(;"`"!==e[t]&&t<e.length;)t++;return new i.default("lit",e.substring(1,t),e.substring(0,t+1))}var l=e.search(r),u=e.indexOf(n.templateTokens.opening);(-1===l||u>-1&&u<l)&&(l=u),l<0&&(l=e.length);var c=e.substring(0,l);return e.startsWith(n.variableResolutionToken)?new i.default("variable",c.substr(n.variableResolutionToken.length),c):e.startsWith(n.fixedResolutionToken)?new i.default("fixed",c.substr(n.fixedResolutionToken.length),c):new i.default("splain",c,c)}},{key:"findFirstTokenOfType",value:function(e,n){for(var t=0;t<n.length;t++)if(n[t].type===e)return t;return null}},{key:"getPrecedingTokenOfType",value:function(e,n,t){if(0===t)return null;for(var a=t-1;a>=0;a--)if(e.indexOf(n[a].type)>-1)return a;return null}},{key:"getProceedingTokenOfType",value:function(e,n,t){if(t===n.length-1)return null;for(var a=t+1;a<n.length;a++)if(e.indexOf(n[a].type)>-1)return a;return null}}]),e}();n.default=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(t(12)),r=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"getTemplates",value:function(e,n){var t=[],a=i.default.getLiterals(e),r=e.split(n.templateTokens.opening).length-1,o=e.split(n.templateTokens.closing).length-1;if(r>o)throw"Error: not enough closing tokens found in "+e;if(r<o)throw"Error: not enough opening tokens found in "+e;for(;e.includes(n.templateTokens.opening)&&e.includes(n.templateTokens.closing);)for(var s=e.indexOf(n.templateTokens.opening),l=0,u=s+2;u<e.length-1;u++)e[u]+e[u+1]===n.templateTokens.opening&&l++,e[u]+e[u+1]===n.templateTokens.closing&&(l>0?(l--,u+=1):(i.default.withinLiterals(s,u+1,a)||t.push(e.substring(s,u+2)),u=(e=e.slice(0,s)+e.slice(u+2)).length));return t}},{key:"containsTemplate",value:function(e,n){function t(e){return"\\"+e.split("").join("\\")}var a=t(n.templateTokens.opening)+".*?"+t(n.templateTokens.closing);return e.match(a)}}]),e}();n.default=r},function(e,n,t){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(t(0));e.exports=new a.default},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),i=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"processContexts",value:function(e,n){var t=e.filter(function(e){if(e.hasOwnProperty("context"))return e.context.hasOwnProperty("match")?n.hasMatchingContext(e.context.match):n.hasMatchingContext(e.context)});return t.length>0?t:e}},{key:"processWeights",value:function(e){if(null!==e&&Array.isArray(e))for(var n=void 0;-1!==(n=e.findIndex(function(e){return e.hasOwnProperty("weight")}));){for(var t=[],a=0;a<e[n].weight;a++)t.push(e[n].value);e.splice.apply(e,[n,1].concat(t))}return e}}]),e}();n.default=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={adj:{size:{xxl:["enormous","massive","gigantic","colossal","gargantuan","brobdingnagian"],xl:["giant","huge","vast","mammoth"],l:["big","jumbo","large"],s:["small","slight","petite","slender","trim","diminuitive"],xs:["tiny","minuscule","lilliputian"]},temp:{cold:["cold","freezing","icy","brisk","bleak","nippy","chilly","cool","bracing"],lukewarm:["tepid","room temperature"],warm:["hot","boiling","sweltering","roasting","scorching","melting","sizzling","burning","fiery"]},difficulty:{impossible:["insurmountable","intractable"],hard:["difficult","hard","troublesome","tough","arduous","laborious","strenuous","back breaking"],easy:["easy","simple","effortless","straightforward","trivial"]},boring:["uninteresting","bland"],interesting:["interesting","appealing","delightful","engaging","compelling","enchanting","gripping","fascinating","riveting","intriguing"],veryInteresting:["{{adverbs.very adj.interesting}}","{{adj.size.xxl'ly' adj.interesting}}"],speed:{fast:["fast","upbeat","quick","brisk","hasty"],slow:["slow","creep","laggy","crawl","lackadaisical","lethargic"]},color:["red","blue","green","purple","pink","gray","black","orange","brown","charcoal","cyan","magenta","fuchsia","yellow","gold","silver","white","teal","turquoise","mauve"]},adverbs:{speed:{fast:["quickly","speedily","hastily","rapidly","briskly","promptly","swiftly"],slow:["slowly","sluggishly","unhurriedly","lazily","casually","lackadaisically"]},very:["very","exceedingly","awfully","greatly","emininently","absolutely","extraordinarily","extremely","really","terribly"],frequency:{always:["always","constantly","unceasingly","incessantly"],frequently:["usually","normally","often","frequently"],sometimes:["sometimes","occasionally","intermittenly"],infrequently:["hardly ever","rarely","seldom","infrequently","irregularly","once in a blue moon"],never:["never"]}},weather:{rain:["drizzling","showering","raining","spitting","pouring","deluge"],sun:["sunny","warm","bright","luminous","radiant"],snow:["thundersnow","blizzard","flurry","snow storm","snowsquall","lake-effect snow","sleet","slush"],wind:["airstream","breeze","berg wind","crosswind","dust devil","easterly","gale","gust","headwind","jet stream","mistral","monsoon","sandstorm","prevailing wind","sea breeze","sicocco","southwester","tail wind","tornado","trade wind","turbulance","twister","typhoon","whirlwind","wind","windstorm","zephr"],winter:["freezing","snowy","icy","slick","frosty","arctic","bitingly chilly","polar"],fog:["foggy","misty","smog","haze"]},genre:{music:["rock","pop","punk","indie","hip hop","reggae","folk","country","blues","classical","jazz","alternative","electronic","metal","dubstep","rap","ragtime","disco"],film:["action","adventure","comedy","drama","fantasy","horror","thriller","romance","science fiction","western","documentary"],book:["non fiction","fiction","sci-fi","mystery","cyberpunk","graphic","young adult","children","classic","romance","fantasy","science fiction","speculative","poetry","suspense"]},nouns:{landtypes:["forest","desert","rain forest","mountains","plains","grasslands","bush","tundra","jungle","bog","swamp","veldt","hills","wetlands"],food:{fruit:["banana","apple","orange","pear","pineapple","grapefruit","avocado","passionfruit","strawberry","kiwifruit","grape","peach","cherry","guava","blueberry","blackberry","raspberry","watermelon","melon","mango","nectarine","starfruit","date","cranberry","persimmon","gooseberry","kumquat","jujube","boysenberry","longan"],desserts:["cupcakes","ice cream","cookies","brownies","apple pie","pumpkin pie","cake","cheesecake","muffin","fruit salad","tiramisu","tart","cobbler","macaron","macaroon","custard","rice pudding","sorbet","flan","gelato"],vegetables:["avocado","asparagus","arugula","beet","broccoli","brussel sprout","cabbage","carrot","cauliflower","celery","chard","collard greens","corn","kale","lettuce","mushroom","onion","pepper","parsley","rhubarb","parsnip","radish","spinach","squash","tomato","sweet potato","yam","zucchini"],breakfast:["eggs","toast","pancakes","coffee","orange juice","bacon","sausage","oatmeal","waffles","cereal","bagel","muesli","granola bar"],condiments:["ketchup","mustard","mayonaise","soy sauce","vinegar","sauerkraut","salsa","relish","hot sauce","sriracha"],lunch:["sandwich","soup","salad","pizza","leftovers","tacos","burrito","sushi"],dinner:["roast chicken","meatloaf","steak","baked potato","lasagna","casserole"]},clothes:{shirts:["t-shirt","button-down","dress","hawaiian","tank-top","tie-dye","flannel"],sweaters:["cardigan","wool","cashmere","knitted","cosby"],coats:["jacket","overcoat","army","camouflage","raincoat","slicker","dress"],pants:["jeans","trousers","corduroy","short","riding","skinny jeans","dress","cargo"],skirts:["riding","mini","maxi","tutu","ruffled"],shoes:["boots","tap","dance","high-heel","riding"],dresses:["gown","ballgown","evening","sun-dress"],socks:["hose","knee-high","jeggings","leggings","panty-hose","tights","nylons"],gloves:["mittens","fingerless","wool","army","riding","driving","lace","leather"],hats:["top","baseball cap","bowler","cowboy","tricorne","crown","bonnet"],accessories:["tie","kerchief"],swimsuits:["speedo","bikini","trunks","monokini","one-piece","wetsuit","diving suit"]},daytime:["morning","afternoon","evening","night","sunset","sunrise","dusk","dawn","midnight","twilight"],trees:["ash","beech","birch","conifer","fir","larch","maple","oak","pine","spruce","sycamore","willow","yew","rowan","hickory"],nationalParks:["Denali","Gates of the Arctic","Glacier Bay","Katmai","Kenai Fjords","Kobuk Valley","Lake Clark","Wrangell - St. Elias","American Samoa","Grand Canyon","Petrified Forest","Saguaro","Hot Springs","Channel Islands","Death Valley","Joshua Tree","Kings Canyon","Lassen Volcanic","Redwood","Sequoia","Yosemite","Black Canyon of the Gunnison","Great Sand Dunes","Mesa Verde","Rocky Mountain","Biscayne","Dry Tortugas","Everglades","Haleakala","Hawaii Volcanoes","Yellowstone","Mammoth Cave","Acadia","Isle Royale","Voyageurs","Glacier","Yellowstone","Great Basin","Carlsbad Caverns","Great Smoky Mountains","Theodore Roosevelt","Cuyahoga Valley","Crater Lake","Congaree","Badlands","Wind Cave","Great Smoky Mountains","Big Bend","Guadalupe Mountains","Virgin Islands","Arches","Bryce Canyon","Capitol Reef","Canyonlands","Zion","Shenandoah","Mount Rainier","North Cascades","Olympic","Grand Teton"],animal:{mammels:["monkey","lion","jaguer","elephant","gorilla","gopher","armadillo","pnagolin","dog","cat","bear","mouse","rabbit","horse","giraffe","donkey","wolf","coyote","rhino","hippo","aardvark","alpaca","llama","cow","moose","deer","dolphin","skunk","walrus","whale","zebra","goat","racoon","rat","chipmonk","panda","ferret","sheep"],reptiles:["snake"],birds:["crow","chicken","duck"],fish:["eel","clown","shark","tuna","salmon"],crustaceans:["crab","lobster"],molluscs:["clam"],insects:["ant","butterfly"],gastropods:["snail"],amphibians:["frog","salamander"]},country:["Afghanistan","Albania","Algeria","America","Andorra","Angola","Antigua","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bissau","Bolivia","Bosnia","Botswana","Brazil","British","Brunei","Bulgaria","Burkina","Burma","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo","Costa Rica","Croatia","Cuba","Cyprus","Czech","Denmark","Djibouti","Dominica","East Timor","Ecuador","Egypt","El Salvador","Emirate","England","Eritrea","Estonia","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Great Britain","Greece","Grenada","Grenadines","Guatemala","Guinea","Guyana","Haiti","Herzegovina","Holland","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Ivory Coast","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Korea","Kosovo","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","Norway","Oman","Pakistan","Palau","Panama","Papua","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Samoa","San Marino","Sao Tome","Saudi Arabia","Scotland","Scottish","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon","Somalia","South Africa","South Sudan","Spain","Sri Lanka","St Kitts","St Lucia","Sudan","Suriname","Swaziland","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Tobago","Togo","Tonga","Trinidad","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Kingdom","United States","Uruguay","USA","Uzbekistan","Vanuatu","Vatican","Venezuela","Vietnam","Wales","Welsh","Yemen","Zambia","Zimbabwe","Antigua and Barbuda","Bosnia and Herzegovina","Burkina Faso","Cabo Verde","Central African Republic","Democratic Republic of the Congo","Republic of the Congo","Cote d'Ivoire","South Korea","Timor-Leste","Trinidad and Tobago","United Arab Emirates","United Kingdom","United States of America","Vatican City"],vehicle:["ambulance","bicycle","boat","bulldozer","bus","car","jeep","minibus","mini cooper","motorcycle","scooter","sidecar","snowplow","tank","taxi","tractor","truck"],place:["amusement park","apartments","beach","church","factory","farm","fire station","hospital","house","library","mosque","park","playground","police station","school","store","temple","university","zoo","office","synagogue","city hall"],sport:["football","cricket","basketball","baseball","hockey","tennis","volleyball","rugby","soccer","swimming","cycling"],states:["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],body:["ankle","arm","back","blood","liver","lung","kidney","bone","brain","cheek","chest","chin","ear","elbow","eye","finger","foot","hand","heart","knee","leg","lip","mouth","muscle","neck","nose","shoulder","stomach","teeth","toe","tongue","wrist"],season:["fall","autumn","winter","summer","spring","monsoon"],computer:["mouse","keyboard","processor","hard drive","software","RAM","monitor","speakers","usb","GPU","VRAM","motherboard","SSD","power supply","CPU","sound card","KVM switch"]}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),i=o(t(1)),r=o(t(2));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(n,t,a){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.dictionary=n||new i.default,this.config=t||new r.default,this.contexts=[],this.templateResolutions={},this.fixedResolutions={},a&&Object.assign(this,a)}return a(e,[{key:"getResult",value:function(e){var n=this.dictionary.getProcessedEntry(e,this);if(null!==n&&Array.isArray(n)){var t=n[Math.floor(Math.random()*n.length)];return t.hasOwnProperty("context")?(t.context.hasOwnProperty("match")&&(t.context.hasOwnProperty("add")&&this.addContext(t.context.add),t.context=t.context.match),this.addContextWithPolicy(t.context),t.value):t}return this.config.keepTemplateOnUnmatched?e:null}},{key:"addFixedResolution",value:function(e,n){this.fixedResolutions[e]=n}},{key:"getFixedResolution",value:function(e){return this.fixedResolutions[e]}},{key:"addContextWithPolicy",value:function(e){e=[].concat(e),this.config.contextMatcher===this.config.contextMatchers.conservative||this.hasMatchingContext(e)||(this.config.contextMatcher===this.config.contextMatchers.selective&&(e=e[Math.floor(Math.random()*e.length)]),this.addContext(e))}},{key:"addContext",value:function(e){var n=this;this.contexts=this.contexts.concat(e),this.contexts=this.contexts.filter(function(e,t){return n.contexts.indexOf(e)===t})}},{key:"hasMatchingContext",value:function(e){return Array.isArray(e)&&this.contexts.some(function(n){return e.includes(n)})||this.contexts.includes(e)}},{key:"addTemplateResolution",value:function(e,n){this.templateResolutions[e]?this.templateResolutions[e]=this.templateResolutions[e].concat(n):this.templateResolutions[e]=[n]}}]),e}();n.default=s},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(t(0));n.default={verifyEntries:function(e,n,t){var i=this;n||((n=new a.default(e.entries||e)).config.configure("explicit",!0),n.config.configure("keepTemplateOnUnmatched",!1)),e.entries&&(e=e.entries);var r=[],o=function(a){var o=e[a],s=t?t+"."+a:a;Array.isArray(o)?o.forEach(function(e){var t=a+"."+e,i=n.process(""+e);(i.indexOf("null")>=0||i===t)&&r.push({token:e,key:s})}):r=r.concat(i.verifyEntries(o,n,s))};for(var s in e)o(s);return r}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(t(3)),r=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"run",value:function(e,n){this.executeOrs(e),this.executeConditionals(e);var t="";return e.forEach(function(e){t+=e.convert(n)}),t}},{key:"executeConditionals",value:function(e){for(;null!==i.default.findFirstTokenOfType("?",e);){var n=i.default.findFirstTokenOfType("?",e);if(null===n)break;if(1!==this.rand(e[n].data)){var t=i.default.getPrecedingTokenOfType(["lit","splain"],e,n);e.splice(t,n-t+1)}else e.splice(n,1)}}},{key:"executeOrs",value:function(e){for(;null!==i.default.findFirstTokenOfType("|",e);){var n=i.default.findFirstTokenOfType("|",e);if(null===n)break;var t=i.default.getPrecedingTokenOfType(["lit","splain"],e,n),a=i.default.getProceedingTokenOfType(["lit","splain"],e,n);null!==t&&null!==a?1===this.rand(2)?e.splice(t,n-t+1):(a+1<e.length&&"?"===e[a+1].type&&a++,e.splice(n,a-n+1)):e.splice(n,1)}}},{key:"rand",value:function(e){return Math.floor(Math.random()*e)+1}}]),e}();n.default=r},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),i=o(t(0)),r=o(t(4));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(n,t,a){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=n,this.data=t,this.raw=a}return a(e,[{key:"convert",value:function(e){switch(this.type){case"splain":return e.getResult(this.data);case"fixed":var n=e.getFixedResolution(this.data);if(n)return n;var t=e.getResult(this.data);return e.addFixedResolution(this.data,t),t;case"variable":if(e.variables&&e.variables.hasOwnProperty(this.data)){var a=e.variables[this.data];return"function"==typeof a?a(e):a}return e.config.keepTemplateOnUnmatched?this.data:null;case"blank":return" ";case"lit":return this.data;case"template":var o=i.default.processTemplate(this.raw,e);return r.default.containsTemplate(o,e.config)?i.default.processTemplate(o,e):o;default:return}}}]),e}();n.default=s},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),i=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"getLiterals",value:function(e){for(var n=[],t=null,a=0;a<e.length;a++)"`"===e[a]&&(null===t?t=a:(n.push({start:t,end:a}),t=null));return n}},{key:"withinLiterals",value:function(e,n,t){var a=!1;return t.forEach(function(t){t.start<e&&t.end>n&&(a=!0)}),a}}]),e}();n.default=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),i=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"stripTemplate",value:function(e,n){var t=e.indexOf(n.templateTokens.opening),a=e.lastIndexOf(n.templateTokens.closing)-n.templateTokens.closing.length;return t>-1&&(e=e.slice(0,t)+e.slice(t+n.templateTokens.opening.length)),a>-1&&(e=e.slice(0,a)+e.slice(a+n.templateTokens.opening.length)),e}}]),e}();n.default=i}])});
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Splain",[],t):"object"==typeof exports?exports.Splain=t():e.Splain=t()}(window,function(){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=5)}([function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(a(6)),r=n(a(1)),s=n(a(7)),o=n(a(2)),l=n(a(9)),u=n(a(12)),c=n(a(4)),d=n(a(13)),h=n(a(3));class f{static processTemplate(e,t){return t||(t=new u.default),c.default.getTemplates(e,t.config).forEach(a=>{const n=d.default.stripTemplate(a,t.config),i=h.default.getTokens(n,t.config);let r=l.default.run(i,t);c.default.containsTemplate(r,t.config)&&(r=this.processTemplate(r,t)),e=e.replace(`${a}`,r),t.addTemplateResolution(n,r)}),e}constructor(e){this.new(e)}new(e){this.dictionaries={default:new o.default},this.dictionaries.default.addEntry(e||s.default),this.config=new r.default}configure(e,t){return this.config.configure(e,t)}addEntry(e,t){t||(t="default"),this.dictionaries[t]||(this.dictionaries[t]=new o.default),this.dictionaries[t].addEntry(e)}process(e,t){return(t=t||{}).dictionaryName||(t.dictionaryName="default"),f.processTemplate(e,new u.default(this.dictionaries[t.dictionaryName],this.config,t))}verifyDictionary(e){return i.default.verifyEntries(e)}}t.default=f},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.keepTemplateOnUnmatched=!0,this.templateTokens={opening:"{{",closing:"}}"},this.fixedResolutionToken="::",this.variableResolutionToken="##",this.keepTemplateOnUnmatched=!0,this.panicThreshold=1e5,this.contextMatchers={conservative:0,selective:1,additive:2},this.contextMatcher=this.contextMatchers.selective}configure(e,t){return this.hasOwnProperty(e)&&(this[e]=t),this}}},function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(a(8));t.default=class{constructor(){this.entries={}}addEntry(e){Object.keys(e).forEach(t=>{this.entries[t]=e[t]})}getEntry(e){const t=e.split(".").reduce((e,t)=>{if(null===e)return null;return e[t]||null},this.entries);return Array.isArray(t)?t:null}getProcessedEntry(e,t){const a=this.getEntry(e);if(!a)return null;const n=i.default.processContexts(a,t);return i.default.processWeights(n)}}},function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(a(10)),r=/[?`|\s]/;t.default=class{static getTokens(e,t){const a=[];let n=t.panicThreshold;for(;e;){n--;const i=this.findNextToken(e,t);if(a.push(i),e=e.slice(i.raw.length),n<=0){console.warn(`couldn't finish processing tokens after ${t.panicThreshold} panicking..`);break}}return a}static findNextToken(e,t){let a=1;if(e.startsWith(t.templateTokens.opening)){let n=1;const r=t.templateTokens.opening.length,s=t.templateTokens.closing.length;for(a=r;a<e.length&&n>0;)e.indexOf(t.templateTokens.opening,a)===a?(n++,a+=r):e.indexOf(t.templateTokens.closing,a)===a?(n--,a+=s):a++;if(n>0)throw new Error(`template {${e}} has no closing token`);return new i.default("template",e.substring(r,a-s),e.substring(0,a))}if("?"===e[0]){for(;!isNaN(e[a])&&" "!==e[a]&&a<e.length;)a++;return new i.default("?",e.substring(1,a)||"2",e.substring(0,a))}if("|"===e[0])return new i.default("|",null,"|");if(" "===e[0]||"\n"===e[0])return new i.default("blank",null,e[0]);if("`"===e[0]){for(;"`"!==e[a]&&a<e.length;)a++;return new i.default("lit",e.substring(1,a),e.substring(0,a+1))}let n=e.search(r);const s=e.indexOf(t.templateTokens.opening);(-1===n||s>-1&&s<n)&&(n=s),n<0&&(n=e.length);const o=e.substring(0,n);return e.startsWith(t.variableResolutionToken)?new i.default("variable",o.substr(t.variableResolutionToken.length),o):e.startsWith(t.fixedResolutionToken)?new i.default("fixed",o.substr(t.fixedResolutionToken.length),o):new i.default("splain",o,o)}static findFirstTokenOfType(e,t){for(let a=0;a<t.length;a++)if(t[a].type===e)return a;return null}static getPrecedingTokenOfType(e,t,a){if(0===a)return null;for(let n=a-1;n>=0;n--)if(e.indexOf(t[n].type)>-1)return n;return null}static getProceedingTokenOfType(e,t,a){if(a===t.length-1)return null;for(let n=a+1;n<t.length;n++)if(e.indexOf(t[n].type)>-1)return n;return null}}},function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(a(11));t.default=class{static getTemplates(e,t){const a=[],n=i.default.getLiterals(e),r=e.split(t.templateTokens.opening).length-1,s=e.split(t.templateTokens.closing).length-1;if(r>s)throw new Error(`Error: not enough closing tokens found in ${e}`);if(r<s)throw new Error(`Error: not enough opening tokens found in ${e}`);for(;e.includes(t.templateTokens.opening)&&e.includes(t.templateTokens.closing);){const r=e.indexOf(t.templateTokens.opening);let s=0;for(let o=r+2;o<e.length-1;o++)e[o]+e[o+1]===t.templateTokens.opening&&s++,e[o]+e[o+1]===t.templateTokens.closing&&(s>0?(s--,o+=1):(i.default.withinLiterals(r,o+1,n)||a.push(e.substring(r,o+2)),o=(e=e.slice(0,r)+e.slice(o+2)).length))}return a}static containsTemplate(e,t){function a(e){return"\\"+e.split("").join("\\")}const n=a(t.templateTokens.opening)+".*?"+a(t.templateTokens.closing);return e.match(n)}}},function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(a(0));e.exports=new i.default},function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(a(0));t.default={verifyEntries(e,t,a){t||((t=new i.default(e.entries||e)).config.configure("explicit",!0),t.config.configure("keepTemplateOnUnmatched",!1)),e.entries&&(e=e.entries);let n=[];for(let i in e){let r=e[i],s=a?`${a}.${i}`:i;Array.isArray(r)?r.forEach(e=>{let a=`${i}.${e}`,r=t.process(`${e}`);(r.indexOf("null")>=0||r===a)&&n.push({token:e,key:s})}):n=n.concat(this.verifyEntries(r,t,s))}return n}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={adj:{size:{xxl:["enormous","massive","gigantic","colossal","gargantuan","brobdingnagian"],xl:["giant","huge","vast","mammoth"],l:["big","jumbo","large"],s:["small","slight","petite","slender","trim","diminuitive"],xs:["tiny","minuscule","lilliputian"]},temp:{cold:["cold","freezing","icy","brisk","bleak","nippy","chilly","cool","bracing"],lukewarm:["tepid","room temperature"],warm:["hot","boiling","sweltering","roasting","scorching","melting","sizzling","burning","fiery"]},difficulty:{impossible:["insurmountable","intractable"],hard:["difficult","hard","troublesome","tough","arduous","laborious","strenuous","back breaking"],easy:["easy","simple","effortless","straightforward","trivial"]},boring:["uninteresting","bland"],interesting:["interesting","appealing","delightful","engaging","compelling","enchanting","gripping","fascinating","riveting","intriguing"],veryInteresting:["{{adverbs.very adj.interesting}}","{{adj.size.xxl'ly' adj.interesting}}"],speed:{fast:["fast","upbeat","quick","brisk","hasty"],slow:["slow","creep","laggy","crawl","lackadaisical","lethargic"]},color:["red","blue","green","purple","pink","gray","black","orange","brown","charcoal","cyan","magenta","fuchsia","yellow","gold","silver","white","teal","turquoise","mauve"]},adverbs:{speed:{fast:["quickly","speedily","hastily","rapidly","briskly","promptly","swiftly"],slow:["slowly","sluggishly","unhurriedly","lazily","casually","lackadaisically"]},very:["very","exceedingly","awfully","greatly","emininently","absolutely","extraordinarily","extremely","really","terribly"],frequency:{always:["always","constantly","unceasingly","incessantly"],frequently:["usually","normally","often","frequently"],sometimes:["sometimes","occasionally","intermittenly"],infrequently:["hardly ever","rarely","seldom","infrequently","irregularly","once in a blue moon"],never:["never"]}},weather:{rain:["drizzling","showering","raining","spitting","pouring","deluge"],sun:["sunny","warm","bright","luminous","radiant"],snow:["thundersnow","blizzard","flurry","snow storm","snowsquall","lake-effect snow","sleet","slush"],wind:["airstream","breeze","berg wind","crosswind","dust devil","easterly","gale","gust","headwind","jet stream","mistral","monsoon","sandstorm","prevailing wind","sea breeze","sicocco","southwester","tail wind","tornado","trade wind","turbulance","twister","typhoon","whirlwind","wind","windstorm","zephr"],winter:["freezing","snowy","icy","slick","frosty","arctic","bitingly chilly","polar"],fog:["foggy","misty","smog","haze"]},genre:{music:["rock","pop","punk","indie","hip hop","reggae","folk","country","blues","classical","jazz","alternative","electronic","metal","dubstep","rap","ragtime","disco"],film:["action","adventure","comedy","drama","fantasy","horror","thriller","romance","science fiction","western","documentary"],book:["non fiction","fiction","sci-fi","mystery","cyberpunk","graphic","young adult","children","classic","romance","fantasy","science fiction","speculative","poetry","suspense"]},nouns:{landtypes:["forest","desert","rain forest","mountains","plains","grasslands","bush","tundra","jungle","bog","swamp","veldt","hills","wetlands"],food:{fruit:["banana","apple","orange","pear","pineapple","grapefruit","avocado","passionfruit","strawberry","kiwifruit","grape","peach","cherry","guava","blueberry","blackberry","raspberry","watermelon","melon","mango","nectarine","starfruit","date","cranberry","persimmon","gooseberry","kumquat","jujube","boysenberry","longan"],desserts:["cupcakes","ice cream","cookies","brownies","apple pie","pumpkin pie","cake","cheesecake","muffin","fruit salad","tiramisu","tart","cobbler","macaron","macaroon","custard","rice pudding","sorbet","flan","gelato"],vegetables:["avocado","asparagus","arugula","beet","broccoli","brussel sprout","cabbage","carrot","cauliflower","celery","chard","collard greens","corn","kale","lettuce","mushroom","onion","pepper","parsley","rhubarb","parsnip","radish","spinach","squash","tomato","sweet potato","yam","zucchini"],breakfast:["eggs","toast","pancakes","coffee","orange juice","bacon","sausage","oatmeal","waffles","cereal","bagel","muesli","granola bar"],condiments:["ketchup","mustard","mayonaise","soy sauce","vinegar","sauerkraut","salsa","relish","hot sauce","sriracha"],lunch:["sandwich","soup","salad","pizza","leftovers","tacos","burrito","sushi"],dinner:["roast chicken","meatloaf","steak","baked potato","lasagna","casserole"]},clothes:{shirts:["t-shirt","button-down","dress","hawaiian","tank-top","tie-dye","flannel"],sweaters:["cardigan","wool","cashmere","knitted","cosby"],coats:["jacket","overcoat","army","camouflage","raincoat","slicker","dress"],pants:["jeans","trousers","corduroy","short","riding","skinny jeans","dress","cargo"],skirts:["riding","mini","maxi","tutu","ruffled"],shoes:["boots","tap","dance","high-heel","riding"],dresses:["gown","ballgown","evening","sun-dress"],socks:["hose","knee-high","jeggings","leggings","panty-hose","tights","nylons"],gloves:["mittens","fingerless","wool","army","riding","driving","lace","leather"],hats:["top","baseball cap","bowler","cowboy","tricorne","crown","bonnet"],accessories:["tie","kerchief"],swimsuits:["speedo","bikini","trunks","monokini","one-piece","wetsuit","diving suit"]},daytime:["morning","afternoon","evening","night","sunset","sunrise","dusk","dawn","midnight","twilight"],trees:["ash","beech","birch","conifer","fir","larch","maple","oak","pine","spruce","sycamore","willow","yew","rowan","hickory"],nationalParks:["Denali","Gates of the Arctic","Glacier Bay","Katmai","Kenai Fjords","Kobuk Valley","Lake Clark","Wrangell - St. Elias","American Samoa","Grand Canyon","Petrified Forest","Saguaro","Hot Springs","Channel Islands","Death Valley","Joshua Tree","Kings Canyon","Lassen Volcanic","Redwood","Sequoia","Yosemite","Black Canyon of the Gunnison","Great Sand Dunes","Mesa Verde","Rocky Mountain","Biscayne","Dry Tortugas","Everglades","Haleakala","Hawaii Volcanoes","Yellowstone","Mammoth Cave","Acadia","Isle Royale","Voyageurs","Glacier","Yellowstone","Great Basin","Carlsbad Caverns","Great Smoky Mountains","Theodore Roosevelt","Cuyahoga Valley","Crater Lake","Congaree","Badlands","Wind Cave","Great Smoky Mountains","Big Bend","Guadalupe Mountains","Virgin Islands","Arches","Bryce Canyon","Capitol Reef","Canyonlands","Zion","Shenandoah","Mount Rainier","North Cascades","Olympic","Grand Teton"],animal:{mammels:["monkey","lion","jaguer","elephant","gorilla","gopher","armadillo","pnagolin","dog","cat","bear","mouse","rabbit","horse","giraffe","donkey","wolf","coyote","rhino","hippo","aardvark","alpaca","llama","cow","moose","deer","dolphin","skunk","walrus","whale","zebra","goat","racoon","rat","chipmonk","panda","ferret","sheep"],reptiles:["snake"],birds:["crow","chicken","duck"],fish:["eel","clown","shark","tuna","salmon"],crustaceans:["crab","lobster"],molluscs:["clam"],insects:["ant","butterfly"],gastropods:["snail"],amphibians:["frog","salamander"]},country:["Afghanistan","Albania","Algeria","America","Andorra","Angola","Antigua","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bissau","Bolivia","Bosnia","Botswana","Brazil","British","Brunei","Bulgaria","Burkina","Burma","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo","Costa Rica","Croatia","Cuba","Cyprus","Czech","Denmark","Djibouti","Dominica","East Timor","Ecuador","Egypt","El Salvador","Emirate","England","Eritrea","Estonia","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Great Britain","Greece","Grenada","Grenadines","Guatemala","Guinea","Guyana","Haiti","Herzegovina","Holland","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Ivory Coast","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Korea","Kosovo","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","Norway","Oman","Pakistan","Palau","Panama","Papua","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Samoa","San Marino","Sao Tome","Saudi Arabia","Scotland","Scottish","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon","Somalia","South Africa","South Sudan","Spain","Sri Lanka","St Kitts","St Lucia","Sudan","Suriname","Swaziland","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Tobago","Togo","Tonga","Trinidad","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Kingdom","United States","Uruguay","USA","Uzbekistan","Vanuatu","Vatican","Venezuela","Vietnam","Wales","Welsh","Yemen","Zambia","Zimbabwe","Antigua and Barbuda","Bosnia and Herzegovina","Burkina Faso","Cabo Verde","Central African Republic","Democratic Republic of the Congo","Republic of the Congo","Cote d'Ivoire","South Korea","Timor-Leste","Trinidad and Tobago","United Arab Emirates","United Kingdom","United States of America","Vatican City"],vehicle:["ambulance","bicycle","boat","bulldozer","bus","car","jeep","minibus","mini cooper","motorcycle","scooter","sidecar","snowplow","tank","taxi","tractor","truck"],place:["amusement park","apartments","beach","church","factory","farm","fire station","hospital","house","library","mosque","park","playground","police station","school","store","temple","university","zoo","office","synagogue","city hall"],sport:["football","cricket","basketball","baseball","hockey","tennis","volleyball","rugby","soccer","swimming","cycling"],states:["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],body:["ankle","arm","back","blood","liver","lung","kidney","bone","brain","cheek","chest","chin","ear","elbow","eye","finger","foot","hand","heart","knee","leg","lip","mouth","muscle","neck","nose","shoulder","stomach","teeth","toe","tongue","wrist"],season:["fall","autumn","winter","summer","spring","monsoon"],computer:["mouse","keyboard","processor","hard drive","software","RAM","monitor","speakers","usb","GPU","VRAM","motherboard","SSD","power supply","CPU","sound card","KVM switch"]}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{static processContexts(e,t){const a=e.filter(e=>{if(e.hasOwnProperty("context"))return e.context.hasOwnProperty("match")?t.hasMatchingContext(e.context.match):t.hasMatchingContext(e.context)});return a.length>0?a:e}static processWeights(e){if(null!==e&&Array.isArray(e)){let t;for(;-1!==(t=e.findIndex(e=>e.hasOwnProperty("weight")));){const a=[];for(let n=0;n<e[t].weight;n++)a.push(e[t].value);e.splice(t,1,...a)}}return e}}},function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(a(3));t.default=class{static run(e,t){this.executeOrs(e),this.executeConditionals(e);let a="";return e.forEach(e=>{a+=e.convert(t)}),a}static executeConditionals(e){for(;null!==i.default.findFirstTokenOfType("?",e);){const t=i.default.findFirstTokenOfType("?",e);if(null===t)break;if(1!==this.rand(e[t].data)){const a=i.default.getPrecedingTokenOfType(["lit","splain"],e,t);e.splice(a,t-a+1)}else e.splice(t,1)}}static executeOrs(e){for(;null!==i.default.findFirstTokenOfType("|",e);){const t=i.default.findFirstTokenOfType("|",e);if(null===t)break;{const a=i.default.getPrecedingTokenOfType(["lit","splain"],e,t);let n=i.default.getProceedingTokenOfType(["lit","splain"],e,t);null!==a&&null!==n?1===this.rand(2)?e.splice(a,t-a+1):(n+1<e.length&&"?"===e[n+1].type&&n++,e.splice(t,n-t+1)):e.splice(t,1)}}}static rand(e){return Math.floor(Math.random()*e)+1}}},function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(a(0)),r=n(a(4));t.default=class{constructor(e,t,a){this.type=e,this.data=t,this.raw=a}convert(e){switch(this.type){case"splain":return e.getResult(this.data);case"fixed":{const t=e.getFixedResolution(this.data);if(t)return t;const a=e.getResult(this.data);return e.addFixedResolution(this.data,a),a}case"variable":if(e.variables&&e.variables.hasOwnProperty(this.data)){const t=e.variables[this.data];return"function"==typeof t?t(e):t}return e.config.keepTemplateOnUnmatched?this.data:null;case"blank":return" ";case"lit":return this.data;case"template":{const t=i.default.processTemplate(this.raw,e);return r.default.containsTemplate(t,e.config)?i.default.processTemplate(t,e):t}default:return}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{static getLiterals(e){const t=[];let a=null;for(let n=0;n<e.length;n++)"`"===e[n]&&(null===a?a=n:(t.push({start:a,end:n}),a=null));return t}static withinLiterals(e,t,a){let n=!1;return a.forEach(a=>{a.start<e&&a.end>t&&(n=!0)}),n}}},function(e,t,a){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(a(1)),r=n(a(2));t.default=class{constructor(e,t,a){this.dictionary=e||new r.default,this.config=t||new i.default,this.contexts=[],this.templateResolutions={},this.fixedResolutions={},a&&Object.assign(this,a)}getResult(e){const t=this.dictionary.getProcessedEntry(e,this);if(null!==t&&Array.isArray(t)){const e=t[Math.floor(Math.random()*t.length)];return e.hasOwnProperty("context")?(e.context.hasOwnProperty("match")&&(e.context.hasOwnProperty("add")&&this.addContext(e.context.add),e.context=e.context.match),this.addContextWithPolicy(e.context),e.value):e}return this.config.keepTemplateOnUnmatched?e:null}addFixedResolution(e,t){this.fixedResolutions[e]=t}getFixedResolution(e){return this.fixedResolutions[e]}addContextWithPolicy(e){e=[].concat(e),this.config.contextMatcher===this.config.contextMatchers.conservative||this.hasMatchingContext(e)||(this.config.contextMatcher===this.config.contextMatchers.selective&&(e=e[Math.floor(Math.random()*e.length)]),this.addContext(e))}addContext(e){this.contexts=this.contexts.concat(e),this.contexts=this.contexts.filter((e,t)=>this.contexts.indexOf(e)===t)}hasMatchingContext(e){return Array.isArray(e)&&this.contexts.some(t=>e.includes(t))||this.contexts.includes(e)}addTemplateResolution(e,t){this.templateResolutions[e]?this.templateResolutions[e]=this.templateResolutions[e].concat(t):this.templateResolutions[e]=[t]}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{static stripTemplate(e,t){const a=e.indexOf(t.templateTokens.opening),n=e.lastIndexOf(t.templateTokens.closing)-t.templateTokens.closing.length;return a>-1&&(e=e.slice(0,a)+e.slice(a+t.templateTokens.opening.length)),n>-1&&(e=e.slice(0,n)+e.slice(n+t.templateTokens.opening.length)),e}}}])});